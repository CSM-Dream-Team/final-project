% vim: spell spelllang=en_us
\documentclass[conference,12pt]{IEEEtran}
\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc}
\usepackage[english]{babel}
\usepackage{csquotes}
\usepackage{biblatex}
\usepackage{amsmath}
\usepackage{minted}
\usepackage[inline]{enumitem}

\MakeOuterQuote{"}

\addbibresource{references.bib}

\setminted{autogobble,python3,mathescape,fontsize=\footnotesize}
\newcommand\tab[1][.5in]{\hspace*{#1}}
\newcommand\name{VRsh}

% TODO: better name
\title{Final Project Report}
\author{%
    \IEEEauthorblockN{%
        Jonathan Sumner Evans\IEEEauthorrefmark{1},
        Robinson Merillat\IEEEauthorrefmark{2}, and
        Sam Sartor\IEEEauthorrefmark{3}
    }
    \IEEEauthorblockA{%
        Department of Computer Science,
        Colorado School of Mines\\
        Golden, Colorado\\
        Email:
            \IEEEauthorrefmark{1}jonathanevans@mines.edu,
            \IEEEauthorrefmark{2}rdmerillat@mines.edu,
            \IEEEauthorrefmark{3}ssartor@mines.edu
    }
}

\begin{document}

\maketitle

\begin{abstract}
    Virtual Reality (VR) Technology has been developing rapidly over the past
    decade. Current solutions such as Unity attempt to use old programming
    languages and paradigms to implement VR environments and thus limit
    developers' abilities to create new and unique environments. With every
    cutting edge technology, new paradigms and design patterns must be invented.
    In this paper, we discuss a deferred immediate mode (DIM) application
    architecture suitable for implementing large virtual reality applications.
    We present a library which utilizes this architecture and a few case studies
    of this library in use.
\end{abstract}

\section{Introduction}
The Virtual Reality (VR) market is growing rapidly. The International Data
Corporation (IDC) projects that revenues for the combined Augmented Reality (AR)
and Virtual Reality markets will grow from \$5.2 billion in 2016 to more than
\$162 billion in 2020~\cite{IDC:2016:VR-industry}. This flourishing new industry
has created an exciting new field of Software Engineering with great potential
for revolutionary new design paradigms and program architectures.

Most current frameworks and libraries attempt to apply old design paradigms and
program architectures that are well-suited for 2D user interfaces and rendering
3D environments to a flat screen to virtual reality. Although these endeavors
have been successful, they do not fully explore potential new design paradigms
and program architectures.

Our goal is to find a system that provides a modern, fast, and practical
approach to virtual reality development. Specifically, we require that this
system meets the following criteria.

\subsection{Performant}
Virtual Reality requires a very high frame rate. A virtual reality program must
be capable of generating 90 frames per second (fps); thus the effective required
frame rate is 180fps.  Achieving this frame rate is resource intensive and
requires highly efficient and optimized code. Additionally, multithreading is
imperative so that long-running processes can occur without blocking the user
interface. This is unlike a traditional desktop user interface where blocking
the UI process for a second does not have a major affect on the usability of the
program.

\subsection{Volumetric}
Another requirement is to allow volumetric, rather than merely planar, user
interface elements. A \textit{Planar UI} is a user interface where components
are primarily organized along a 2D surface. All desktop toolkits utilize this
model and many virtual reality environments use this model as well. A
\textit{Volumetric UI} is a user interface in which components are organized
within a 3D space.

Because Virtual Reality environments are inherently 3D, they make Volumetric UI
convenient and practical for the first time. A UI element's depth and location
in space can represent more than just a visual effect. Allowing creation of
inherently Volumetric UI elements rather than restricting ourselves to Planar UI
placed into a 3D environment is high priority.

\subsection{Programmable}
% TODO: software API, not editor like Unity

We need a framework that prioritizes application development over game
development---a software development kit first and foremost. Features such as
character rigging, pathfinding, and high-fidelity materials are not necessary
for non-entertainment software. For example, existing frameworks for classical
application development (e.g.\ HTML and GTK) do not include any of these
features. The easy programmatic definition and use of user interface components
must take priority.

\subsection{Flexible}
% TODO: can do anything

\subsection{Modular}
% TODO:

% TODO: Some sort of transition
We chose to take a step back from the predominant design philosophies and
explore alternative architectures.

% TODO:
% Specifically, our approach to meet the following requirements.

% \begin{enumerate*}[label=\alph*)]
%     \item explore and find a generally applicable system for developing virtual
%         reality applications and
%     \item explore systems for interacting with a VR environment
% \end{enumerate*}. 
In this paper, we present a new program architecture and user interface design
paradigm which builds on and combines concepts from many previous architectures.

\section{Evolution of Deferred Immediate Mode}
% TODO: Give brief overview of our "adventures in VR library design"

\subsection{Entity Component System}
% TODO:

\subsection{React-Like Architecture}
% TODO:
% TODO: mention A-Frame

\subsection{Event Tree}

\section{Deferred Immediate Mode}
% TODO: describe general ideals of our architecture (programming language and
% implementation agnostic)

\subsection{Deferred}
% TODO: describe why this is cool

\subsection{Immediate Mode}
% TODO: describe why this is cool

\section{Flight}
% TODO: this section should describe the implementation of DIM (or whatever we
% call it)
Flight is our implementation of a VR UI library using the DIM architecture. It
is written in Rust and is designed to be highly modular. It implements the DIM
architecture using Rust \texttt{FnOnce} closures and resolves state using a
\textit{guru} system.

\subsection{Language}
% TODO: why Rust? Type system.

\subsection{Dependencies}
% TODO: WebVR, nalgebra, gfx

\subsection{Modular}
% TODO:

\subsection{Deferred}
% TODO: describe how we use FnOnces

\subsection{Immediate Mode}
% TODO: describe how we did this (update function)

\subsection{Gurus} % TODO: maybe lump this in with something else?
% TODO: describe how the gurus help resolve things

% TODO: add subsubsections about the various gurus?

\section{Case Studies}
% TODO: Explain that we were creating these applications for a VR independent
% study.

\subsection{Let's Get Physical and Snowflakes --- Physics}
% TODO: Describe how physics, spawning, etc. works in Immediate Mode & Physics
% guru

\subsection{Workbench --- SOMETHING} % TODO
% TODO: Describe how it is used to resolve what is being pointed at.

\subsection{{\name} --- Global User Interface}
% TODO: Describe how we are using it to make the torus thing

\section{Comparison to Alternative Libraries}
% TODO: Overview of the types of alternatives

\subsection{A-Frame}
% TODO: Describe why it sucks compared to Flight

\section{Conclusion}
% TODO: Conclude (duh)

{\printbibliography}

\end{document}
